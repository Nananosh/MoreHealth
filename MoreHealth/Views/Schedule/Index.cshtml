@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<div id="ticketPlan"></div>
<script id="customEditorTemplate" type="text/x-kendo-template">
<!-- notice how the Title is hidden if the event is new -->
<div data-bind="visible: isNew">
  <div class="k-edit-label"><label for="title">Title</label></div>
  <div data-container-for="title" class="k-edit-field">
      <input type="text" class="k-textbox" name="title" required="required" data-bind="value:title">
  </div>
</div>
<div data-bind="invisible: isNew">
    <h4>The 'Title' field is hiddne, because event is not new</h4>
</div>
<div class="k-edit-label">
    <label for="start">Start</label>
  </div>
<div data-container-for="start" class="k-edit-field">
    <input type="text"
           data-role="datetimepicker"
           data-interval="15"
           data-type="date"
           data-bind="value:start,invisible:isAllDay"
           name="start"/>
    <input type="text" data-type="date" data-role="datepicker" data-bind="value:start,visible:isAllDay" name="start" />
    <span data-bind="text: startTimezone"></span>
    <span data-for="start" class="k-invalid-msg" style="display: none;"></span>
  </div>
<div class="k-edit-label"><label for="end">End</label></div>
<div data-container-for="end" class="k-edit-field">
    <input type="text" data-type="date" data-role="datetimepicker" data-bind="value:end,invisible:isAllDay" name="end" data-datecompare-msg="End date should be greater than or equal to the start date" />
    <input type="text" data-type="date" data-role="datepicker" data-bind="value:end,visible:isAllDay" name="end" data-datecompare-msg="End date should be greater than or equal to the start date" />
    <span data-bind="text: endTimezone"></span>
    <span data-bind="text: startTimezone, invisible: endTimezone"></span>
    <span data-for="end" class="k-invalid-msg" style="display: none;"></span>
  </div>
<div class="k-edit-label"><label for="isAllDay">All day event</label></div>
<div data-container-for="isAllDay" class="k-edit-field">
    <input type="checkbox" name="isAllDay" data-type="boolean" data-bind="checked:isAllDay">
  </div>
<div class="k-edit-label"><label for="recurrenceRule">Repeat</label></div>
<div data-container-for="recurrenceRule" class="k-edit-field">
    <div data-bind="value:recurrenceRule" name="recurrenceRule" data-role="recurrenceeditor"></div>
  </div>
<div class="k-edit-label"><label for="description">Description</label></div>
<div data-container-for="description" class="k-edit-field">
    <textarea name="description" class="k-textbox" data-bind="value:description"></textarea>
  </div>
<div class="k-edit-label"><label for="ownerId">Owner</label></div>
<div data-container-for="ownerId" class="k-edit-field">
    <select id="ownerId" data-bind="value:ownerId" data-role="dropdownlist"
                    data-value-field="value" data-text-field="text">
      <option value="1">Alex</option>
      <option value="2">Bob</option>
      <option value="3">Charlie</option>
  </select>
  </div>
</script>

<script>
var date = "FREQ=WEEKLY;BYDAY=TU,TH"
    $(function () {
        $("#ticketPlan").kendoScheduler({
            date: new Date("2021/12/05"),
            startTime: new Date("2021/12/05 07:00 AM"),
            height: 600,
            views: [
                "day",
                { type: "workWeek", selected: true },
                "week",
                "month",
                "agenda"
            ],
            timezone: "Europe/Minsk",
           editable: { template: $("#customEditorTemplate").html()},
            dataSource: {
                batch: true,
                transport: {
                    read: {
                        url: "/Appointment/GetAllTalons",
                        dataType: "json"
                    }
                },
                schema: {
                    model: {
                        id: "taskId", // (Mandatory) The "id" of the event is the "taskId" field.
                        fields: {
                            // Describe the Scheduler event fields and map them to the fields returned by the remote service.
                            taskId: {
                                from: "Id", // The 'TaskID' server-side field is mapped to the 'taskId' client-side field.
                                type: "number"
                            },
                            title: {
                                from: "patient.surname", // The 'Title' server-side field is mapped to the 'title' client-side field.
                                defaultValue: "No title",
                                validation: { required: true }
                            },
                            start: {
                                type: "date",
                                from: "dateStart" // The 'Start' server-side field is mapped to the 'start' client-side field.
                            },
                            end: {
                                type: "date",
                                from: "dateEnd" // The 'End' server-side field is mapped to the 'end' client-side field.
                            },
                            recurrenceRule: {from : "recurrenceRule"}
                        }
                    }
                }
            }
        });

        $("#create").click(function () {
            $("#ticketPlan").data("kendoScheduler").addEvent({
                start: new Date("2013/6/13"),
                end: new Date("2013/6/13")
            });
        });
    });
</script>